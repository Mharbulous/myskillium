{
  "title": "Sync Script Algorithm",
  "description": "Detailed execution flow of sync-myskillium.py/sh script",
  "type": "flowchart",
  "direction": "TD",
  "nodes": [
    {
      "id": "START",
      "label": "Start Sync",
      "type": "circle"
    },
    {
      "id": "CREATE_TEMP",
      "label": "Create temp directory",
      "type": "rectangle"
    },
    {
      "id": "GIT_CLONE",
      "label": "git clone (shallow, depth=1)\nfrom Myskillium repo",
      "type": "rectangle"
    },
    {
      "id": "CHECK_GIT",
      "label": "Git available?",
      "type": "diamond"
    },
    {
      "id": "ERROR_GIT",
      "label": "Exit: Install git",
      "type": "rectangle",
      "style": "fill:#FF6B6B"
    },
    {
      "id": "CHECK_NETWORK",
      "label": "Network OK?",
      "type": "diamond"
    },
    {
      "id": "ERROR_NETWORK",
      "label": "Exit: Retry later",
      "type": "rectangle",
      "style": "fill:#FF6B6B"
    },
    {
      "id": "GET_VERSION",
      "label": "Get new version (HEAD SHA)\nRead old version (.myskillium-version)",
      "type": "rectangle"
    },
    {
      "id": "COPY_SKILLS",
      "label": "Copy .claude/skills/*",
      "type": "rectangle"
    },
    {
      "id": "COPY_COMMANDS",
      "label": "Copy .claude/commands/*",
      "type": "rectangle"
    },
    {
      "id": "COPY_SCRIPTS",
      "label": "Copy .claude/scripts/*",
      "type": "rectangle"
    },
    {
      "id": "COPY_SCHEMA",
      "label": "Copy .claude/data/schema.sql",
      "type": "rectangle"
    },
    {
      "id": "COPY_WORKFLOWS",
      "label": "Copy .github/workflows/*",
      "type": "rectangle"
    },
    {
      "id": "SKIP_NOTE",
      "label": "SKIP: *.db, .claude/local/,\nsettings.local.json",
      "type": "rectangle",
      "style": "fill:#FFD700"
    },
    {
      "id": "UPDATE_VERSION",
      "label": "Write new SHA to\n.myskillium-version",
      "type": "rectangle"
    },
    {
      "id": "CLEANUP",
      "label": "Remove temp directory",
      "type": "rectangle"
    },
    {
      "id": "REPORT",
      "label": "Print: Updated from X to Y\nPrint: Run git add/commit",
      "type": "rectangle",
      "style": "fill:#90EE90"
    },
    {
      "id": "END",
      "label": "Done",
      "type": "circle",
      "style": "fill:#90EE90"
    }
  ],
  "edges": [
    { "from": "START", "to": "CHECK_GIT", "label": "" },
    { "from": "CHECK_GIT", "to": "ERROR_GIT", "label": "No" },
    { "from": "CHECK_GIT", "to": "CREATE_TEMP", "label": "Yes" },
    { "from": "CREATE_TEMP", "to": "GIT_CLONE", "label": "" },
    { "from": "GIT_CLONE", "to": "CHECK_NETWORK", "label": "" },
    { "from": "CHECK_NETWORK", "to": "ERROR_NETWORK", "label": "No" },
    { "from": "CHECK_NETWORK", "to": "GET_VERSION", "label": "Yes" },
    { "from": "GET_VERSION", "to": "COPY_SKILLS", "label": "" },
    { "from": "COPY_SKILLS", "to": "COPY_COMMANDS", "label": "" },
    { "from": "COPY_COMMANDS", "to": "COPY_SCRIPTS", "label": "" },
    { "from": "COPY_SCRIPTS", "to": "COPY_SCHEMA", "label": "" },
    { "from": "COPY_SCHEMA", "to": "COPY_WORKFLOWS", "label": "" },
    { "from": "COPY_WORKFLOWS", "to": "SKIP_NOTE", "label": "", "style": "dotted" },
    { "from": "COPY_WORKFLOWS", "to": "UPDATE_VERSION", "label": "" },
    { "from": "UPDATE_VERSION", "to": "CLEANUP", "label": "" },
    { "from": "CLEANUP", "to": "REPORT", "label": "" },
    { "from": "REPORT", "to": "END", "label": "" }
  ],
  "config": {
    "source_repo": "https://github.com/Mharbulous/Myskillium.git",
    "branch": "main"
  }
}
